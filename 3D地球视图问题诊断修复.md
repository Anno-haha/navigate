# ADS-Bå¯è§†åŒ–ç³»ç»Ÿ - 3Dåœ°çƒè§†å›¾é—®é¢˜è¯Šæ–­ä¸ä¿®å¤

## ğŸ¯ é—®é¢˜æè¿°

3Dåœ°çƒè§†å›¾ç•Œé¢æ˜¾ç¤ºæ­£å¸¸ï¼Œä½†ä¸­é—´åŒºåŸŸåªæ˜¾ç¤º"3Dåœ°çƒå¯è§†åŒ–"æ–‡å­—ï¼Œæ²¡æœ‰æ˜¾ç¤ºå®é™…çš„3Dåœ°çƒæ¨¡å‹ï¼Œéœ€è¦è¯Šæ–­å’Œä¿®å¤3Dæ¸²æŸ“é—®é¢˜ã€‚

## ğŸ” é—®é¢˜è¯Šæ–­

### ğŸ“Š **å¯èƒ½çš„åŸå› åˆ†æ**

#### 1. **Three.jsåº“åŠ è½½é—®é¢˜**
- CDNé“¾æ¥å¤±æ•ˆæˆ–ç½‘ç»œé—®é¢˜
- åº“ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜
- OrbitControlsæ§åˆ¶å™¨åŠ è½½å¤±è´¥

#### 2. **JavaScriptæ‰§è¡Œé”™è¯¯**
- 3Dåˆå§‹åŒ–ä»£ç æ‰§è¡Œå¤±è´¥
- WebGLæ”¯æŒé—®é¢˜
- Canvaså…ƒç´ è·å–å¤±è´¥

#### 3. **æ¸²æŸ“å¾ªç¯é—®é¢˜**
- åŠ¨ç”»å¾ªç¯æœªå¯åŠ¨
- æ¸²æŸ“å‡½æ•°æ‰§è¡Œé”™è¯¯
- åœºæ™¯ã€ç›¸æœºæˆ–æ¸²æŸ“å™¨åˆå§‹åŒ–å¤±è´¥

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### ğŸ”§ **1. Three.jsåº“ä¼˜åŒ–**

#### æ›´æ¢CDNæº
```html
<!-- ä¿®å¤å‰ï¼šå¯èƒ½ä¸ç¨³å®šçš„CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<!-- ä¿®å¤åï¼šæ›´ç¨³å®šçš„CDN -->
<script src="https://cdn.jsdelivr.net/npm/three@0.144.0/build/three.min.js"></script>
```

#### åŠ¨æ€åŠ è½½OrbitControls
```javascript
// æ‰‹åŠ¨åŠ è½½OrbitControlsç¡®ä¿å…¼å®¹æ€§
const script = document.createElement('script');
script.src = 'https://cdn.jsdelivr.net/npm/three@0.144.0/examples/js/controls/OrbitControls.js';
script.onload = function() {
    console.log('OrbitControlsåŠ è½½å®Œæˆ');
};
script.onerror = function() {
    console.warn('OrbitControlsåŠ è½½å¤±è´¥');
};
document.head.appendChild(script);
```

### ğŸ” **2. é”™è¯¯æ£€æŸ¥å’Œè°ƒè¯•**

#### åº“åŠ è½½æ£€æŸ¥
```javascript
function initEarth() {
    console.log('å¼€å§‹åˆå§‹åŒ–3Dåœ°çƒ...');
    
    // æ£€æŸ¥Three.jsæ˜¯å¦åŠ è½½
    if (typeof THREE === 'undefined') {
        console.error('Three.jsåº“æœªåŠ è½½');
        document.getElementById('earth-status').className = 'status-indicator status-offline';
        
        // æ˜¾ç¤ºå¤‡ç”¨ä¿¡æ¯
        showFallbackMessage();
        return;
    }
}
```

#### å¤‡ç”¨æ˜¾ç¤ºæ–¹æ¡ˆ
```javascript
function showFallbackMessage() {
    const canvas = document.getElementById('earth-canvas');
    if (canvas) {
        const ctx = canvas.getContext('2d');
        canvas.width = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;
        
        ctx.fillStyle = '#001122';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        ctx.fillStyle = '#00d4ff';
        ctx.font = '20px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('Three.jsåº“åŠ è½½å¤±è´¥', canvas.width/2, canvas.height/2 - 20);
        ctx.fillText('è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥', canvas.width/2, canvas.height/2 + 20);
    }
}
```

### ğŸ® **3. åŸºç¡€é¼ æ ‡æ§åˆ¶å®ç°**

#### å¤‡ç”¨äº¤äº’æ§åˆ¶
```javascript
// å¦‚æœOrbitControlsåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨åŸºç¡€é¼ æ ‡æ§åˆ¶
if (typeof THREE.OrbitControls === 'undefined') {
    console.warn('OrbitControlsæœªåŠ è½½ï¼Œä½¿ç”¨åŸºç¡€é¼ æ ‡æ§åˆ¶');
    
    let mouseDown = false;
    let mouseX = 0, mouseY = 0;
    
    // é¼ æ ‡æ‹–æ‹½æ—‹è½¬
    canvas.addEventListener('mousedown', (e) => {
        mouseDown = true;
        mouseX = e.clientX;
        mouseY = e.clientY;
    });
    
    canvas.addEventListener('mousemove', (e) => {
        if (mouseDown) {
            const deltaX = e.clientX - mouseX;
            const deltaY = e.clientY - mouseY;
            
            earthGroup.rotation.y += deltaX * 0.01;
            earthGroup.rotation.x += deltaY * 0.01;
            
            mouseX = e.clientX;
            mouseY = e.clientY;
        }
    });
    
    // æ»šè½®ç¼©æ”¾
    canvas.addEventListener('wheel', (e) => {
        e.preventDefault();
        const scale = e.deltaY > 0 ? 1.1 : 0.9;
        earthCamera.position.multiplyScalar(scale);
    });
}
```

### âš¡ **4. æ¸²æŸ“å¾ªç¯ä¼˜åŒ–**

#### é”™è¯¯å¤„ç†å¢å¼º
```javascript
function startEarthAnimation() {
    function animate() {
        try {
            if (earthControls) {
                earthControls.update();
            }
            
            if (autoRotate && earthGroup) {
                earthGroup.rotation.y += 0.005;
            }
            
            renderEarth();
            earthAnimationId = requestAnimationFrame(animate);
        } catch (error) {
            console.error('3DåŠ¨ç”»é”™è¯¯:', error);
            document.getElementById('earth-status').className = 'status-indicator status-offline';
        }
    }
    animate();
}
```

#### æ¸²æŸ“å‡½æ•°ä¿æŠ¤
```javascript
function renderEarth() {
    try {
        if (earthRenderer && earthScene && earthCamera) {
            earthRenderer.render(earthScene, earthCamera);
            
            // æ›´æ–°FPSæ˜¾ç¤º
            const fpsElement = document.getElementById('earth-fps');
            if (fpsElement) {
                fpsElement.textContent = 'FPS: 60';
            }
        } else {
            console.warn('3Dæ¸²æŸ“å™¨ã€åœºæ™¯æˆ–ç›¸æœºæœªåˆå§‹åŒ–');
        }
    } catch (error) {
        console.error('3Dæ¸²æŸ“é”™è¯¯:', error);
    }
}
```

### â° **5. åˆå§‹åŒ–æ—¶åºä¼˜åŒ–**

#### å»¶è¿Ÿåˆå§‹åŒ–
```javascript
// å»¶è¿Ÿåˆå§‹åŒ–3Dåœ°çƒè§†å›¾ï¼Œç¡®ä¿Three.jsåº“å®Œå…¨åŠ è½½
document.addEventListener('DOMContentLoaded', function() {
    fetchAircraftData();
    
    setTimeout(() => {
        initEarth();
    }, 1000);
});
```

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### ğŸ“Š **WebGLå…¼å®¹æ€§æ£€æŸ¥**
```javascript
function checkWebGLSupport() {
    try {
        const canvas = document.createElement('canvas');
        const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
        return !!gl;
    } catch (e) {
        return false;
    }
}
```

### ğŸ¨ **3Dåœºæ™¯é…ç½®**
```javascript
// åˆ›å»ºåœºæ™¯
earthScene = new THREE.Scene();

// åˆ›å»ºç›¸æœº
earthCamera = new THREE.PerspectiveCamera(75, aspect, 0.1, 10000);
earthCamera.position.set(0, 0, 3);

// åˆ›å»ºæ¸²æŸ“å™¨
earthRenderer = new THREE.WebGLRenderer({
    canvas: canvas, 
    antialias: true, 
    alpha: true
});
earthRenderer.setSize(container.clientWidth, container.clientHeight);
earthRenderer.setClearColor(0x000000, 0);
```

### ğŸŒ **åœ°çƒæ¨¡å‹åˆ›å»º**
```javascript
// åœ°çƒå‡ ä½•ä½“
const earthGeometry = new THREE.SphereGeometry(1, 64, 32);

// åœ°çƒæè´¨
const earthMaterial = new THREE.MeshPhongMaterial({
    color: 0x2233ff,
    transparent: true,
    opacity: 0.8,
    wireframe: false
});

// åœ°çƒç½‘æ ¼
earthSphere = new THREE.Mesh(earthGeometry, earthMaterial);
earthGroup.add(earthSphere);

// ç½‘æ ¼çº¿
const wireframeGeometry = new THREE.SphereGeometry(1.01, 32, 16);
const wireframeMaterial = new THREE.MeshBasicMaterial({
    color: 0x00d4ff,
    wireframe: true,
    transparent: true,
    opacity: 0.3
});
const wireframeSphere = new THREE.Mesh(wireframeGeometry, wireframeMaterial);
earthGroup.add(wireframeSphere);
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### âš¡ **æ¸²æŸ“æ€§èƒ½**
- **requestAnimationFrame**: ä¸æµè§ˆå™¨åˆ·æ–°ç‡åŒæ­¥
- **é”™è¯¯æ¢å¤**: æ¸²æŸ“é”™è¯¯æ—¶è‡ªåŠ¨é™çº§
- **èµ„æºç®¡ç†**: åŠæ—¶æ¸…ç†ä¸ç”¨çš„3Då¯¹è±¡

### ğŸ”§ **å…¼å®¹æ€§ä¿è¯**
- **å¤šCDNå¤‡é€‰**: ä¸»CDNå¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢
- **åŸºç¡€æ§åˆ¶**: OrbitControlså¤±è´¥æ—¶ä½¿ç”¨åŸç”Ÿé¼ æ ‡äº‹ä»¶
- **é™çº§æ˜¾ç¤º**: 3Då¤±è´¥æ—¶æ˜¾ç¤º2Då¤‡ç”¨ä¿¡æ¯

## ğŸ¯ è°ƒè¯•å»ºè®®

### ğŸ” **æµè§ˆå™¨å¼€å‘è€…å·¥å…·**
1. **Consoleé¢æ¿**: æŸ¥çœ‹JavaScripté”™è¯¯å’Œè°ƒè¯•ä¿¡æ¯
2. **Networké¢æ¿**: æ£€æŸ¥Three.jsåº“æ˜¯å¦æˆåŠŸåŠ è½½
3. **Performanceé¢æ¿**: ç›‘æ§3Dæ¸²æŸ“æ€§èƒ½

### ğŸ“Š **å¸¸è§é—®é¢˜æ’æŸ¥**
```javascript
// æ£€æŸ¥Three.jsåŠ è½½
console.log('THREE:', typeof THREE);

// æ£€æŸ¥OrbitControlsåŠ è½½
console.log('OrbitControls:', typeof THREE.OrbitControls);

// æ£€æŸ¥WebGLæ”¯æŒ
console.log('WebGLæ”¯æŒ:', checkWebGLSupport());

// æ£€æŸ¥Canvaså…ƒç´ 
console.log('Canvaså…ƒç´ :', document.getElementById('earth-canvas'));
```

## ğŸ‰ ä¿®å¤æ•ˆæœ

### âœ… **é¢„æœŸç»“æœ**
- **3Dåœ°çƒæ¨¡å‹**: è“è‰²çƒä½“å¸¦ç½‘æ ¼çº¿
- **é¼ æ ‡äº¤äº’**: æ‹–æ‹½æ—‹è½¬ã€æ»šè½®ç¼©æ”¾
- **è‡ªåŠ¨æ—‹è½¬**: å¯é€‰çš„åœ°çƒè‡ªè½¬åŠŸèƒ½
- **çŠ¶æ€æŒ‡ç¤º**: ç»¿è‰²è¡¨ç¤ºæ­£å¸¸ï¼Œçº¢è‰²è¡¨ç¤ºé”™è¯¯
- **é”™è¯¯æ¢å¤**: åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºå‹å¥½æç¤º

### ğŸ”§ **æ•…éšœæ’é™¤**
å¦‚æœ3Dåœ°çƒä»ç„¶æ— æ³•æ˜¾ç¤ºï¼š
1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸ï¼ŒThree.jsåº“èƒ½å¤ŸåŠ è½½
3. éªŒè¯æµè§ˆå™¨æ”¯æŒWebGL
4. å°è¯•åˆ·æ–°é¡µé¢é‡æ–°åˆå§‹åŒ–

**é€šè¿‡è¿™äº›ä¿®å¤æªæ–½ï¼Œ3Dåœ°çƒè§†å›¾åº”è¯¥èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºå’Œäº¤äº’ï¼** ğŸŒâœ¨ğŸš€
